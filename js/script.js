function getScrollTop(){var e=0;return document.documentElement&&document.documentElement.scrollTop?e=document.documentElement.scrollTop:document.body&&(e=document.body.scrollTop),e}function getClientHeight(){return document.body.clientHeight&&document.documentElement.clientHeight?Math.min(document.body.clientHeight,document.documentElement.clientHeight):Math.max(document.body.clientHeight,document.documentElement.clientHeight)}function getScrollHeight(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}!function(e,t){var n=n||{init:function(){e(".js-toggle-search").on("click",(function(){e(".js-search").toggleClass("is-visible"),e(".js-search").attr("class").indexOf("is-visible")>0&&e("input.text-input").focus()})),e(".js-next a").on("click",(function(t){e(infinite_scroll.contentSelector).infinitescroll(infinite_scroll);var n=e("body");n.scrollTop(n.scrollTop()-1),t.preventDefault()})),e(t).keydown((function(t){27==t.keyCode&&e(".js-search").attr("class").indexOf("is-visible")>0&&e(".js-search").removeClass("is-visible")})),e(".js-search .text-input").keydown((function(e){if(13==e.keyCode)return!1}))}};e(n.init),e((function(){var n=e("#nav-toggle"),o=e("nav"),i=o.find("a");n.on("click",(function(){return n.toggleClass("active"),o.toggleClass("open"),!1})),i.on("click",(function(){n.toggleClass("active"),o.toggleClass("open")})),e(document).on("click",(function(){o.hasClass("open")&&(n.toggleClass("active"),o.toggleClass("open"))})),e(".btn-slide").click((function(){return e("#panel").slideToggle("slow"),e(this).toggleClass("active"),!1})),e(t).scroll((function(){var t=e("header");e(this).scrollTop()>1||t.removeClass("scrolled"),getScrollTop(),getClientHeight(),getScrollHeight()})),e("#social-share").click((function(){e("#social").toggleClass("visible").slideToggle(200)})),e(".welcome")[0]&&(e(".author-info").hide(),e("span.info-edit").click((function(){e(".author-info").toggle()}))),e.ajaxSettings.async=!1;var l=function(){e.getJSON("/js/images.json",(function(t){console.log(t);var n=t.length,o="http://img.matosiki.site/"+t[parseInt(Math.random()*n)].url;e.ajax({type:"GET",url:o,success:function(){c.attr("style","background-image:url("+o+")")},error:function(){c.attr("style","background-image:url("+s+")")}})}))},c=e(".top-image"),s="http://img.matosiki.site/image/banner/rand/1.jpg";if(c.data("enable")){l();var a=1,r=!0;setInterval(()=>{r?++a>=80&&(r=!1,l()):--a<=0&&(r=!0);var e=1-a%100/100;c.css("opacity",e)},100)}}))}(jQuery,window);