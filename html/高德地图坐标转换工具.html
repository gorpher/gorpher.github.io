<!doctype html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="initial-scale=1,user-scalable=no,width=device-width"><title>高德地图坐标转换工具</title><style>html{font-size:12px}.amap-copyright{box-sizing:content-box}*{box-sizing:border-box}.input-textarea{color:grey;height:8em;overflow:auto;border-radius:.4rem;border:1px solid #ced4da;margin-bottom:1rem}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5;font-weight:300;color:#111213}hr{margin:.5rem 0;box-sizing:content-box;height:0;overflow:visible;border:0;border-top:1px solid rgba(0,0,0,.1)}p{margin-top:0;margin-bottom:0}label{display:inline-block;margin-bottom:.4rem}.btn,label{margin-left:0;font-size:1rem}button,input,select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit;overflow:visible;text-transform:none}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{padding:0;border-style:none}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0;margin:0 .5rem 0 0}h4{font-family:inherit;line-height:1.8;font-weight:300;color:inherit;font-size:1.1rem;margin-top:0;margin-bottom:.5rem}.btn{display:inline-block;font-weight:400;text-align:center;white-space:nowrap;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:1px solid transparent;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;background-color:transparent;background-image:none;color:#25a5f7;border-color:#25a5f7;padding:.25rem .5rem;line-height:1.5;border-radius:1rem;-webkit-appearance:button;cursor:pointer}.btn:hover{color:#fff;background-color:#25a5f7;border-color:#25a5f7}.btn:hover{text-decoration:none}.input-item{position:relative;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:center;align-items:center;width:100%;height:3rem}.input-item:last-child{margin-bottom:0}.input-item>input[type=date],.input-item>input[type=text],.input-item>select{position:relative;-ms-flex:1 1 auto;flex:1 1 auto;width:1%;margin-bottom:0}.input-item>input[type=date]:not(:last-child),.input-item>input[type=text]:not(:last-child),.input-item>select:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-item>input[type=date]:not(:first-child),.input-item>input[type=text]:not(:first-child),.input-item>select:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-item-prepend{margin-right:-1px}.input-item-text,input[type=date],input[type=text],select{height:calc(2.2rem + 2px)}.input-item-text{width:6rem;text-align:justify;padding:.4rem .7rem;display:inline-block;text-justify:distribute-all-lines;text-align-last:justify;-moz-text-align-last:justify;-webkit-text-align-last:justify;-ms-flex-align:center;align-items:center;margin-bottom:0;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;text-align:center;white-space:nowrap;background-color:#e9ecef;border:1px solid #ced4da;border-radius:.25rem;border-bottom-right-radius:0;border-top-right-radius:0}.input-item-text input[type=checkbox],.input-item-text input[type=radio]{margin-top:0}.input-card{display:flex;flex-direction:column;min-width:0;word-wrap:break-word;background-color:#fff;background-clip:border-box;border-radius:.25rem;width:22rem;border-width:0;border-radius:.4rem;box-shadow:0 2px 6px 0 rgba(114,124,245,.5);position:fixed;bottom:1rem;right:1rem;-ms-flex:1 1 auto;flex:1 1 auto;padding:.75rem 1.25rem}.input-text{line-height:2rem;margin-right:2rem}.info hr{margin-right:0;margin-left:0;border-top-color:grey}.info{padding:.75rem 1.25rem;margin-bottom:1rem;border-radius:.25rem;position:fixed;top:1rem;background-color:#fff;width:auto;min-width:22rem;border-width:0;right:1rem;box-shadow:0 2px 6px 0 rgba(114,124,245,.5)}.code{left:1.5rem;right:1.5rem;top:1.5rem;bottom:1.5rem;overflow:auto;margin-bottom:0}.code .btn{top:1rem;position:absolute;right:1rem}.code .result{border:1px solid rgba(0,0,0,.1);border-radius:.5rem;padding:1rem;bottom:1rem;position:absolute;top:5.5rem;right:1rem;left:1rem;overflow:auto}.code .status{color:#80adff;display:inline-block;font-size:14px}.code h4{display:inline-block;max-width:20rem;margin-right:1rem;margin-bottom:1rem}input[type=date],input[type=text],select{display:inline-block;width:100%;padding:.375rem 1.75rem .375rem .75rem;line-height:1.5;color:#495057;vertical-align:middle;background:#fff url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 5'%3E%3Cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E") no-repeat right .75rem center;background-size:8px 10px;border:1px solid #ced4da;border-radius:.25rem;-webkit-appearance:none;-moz-appearance:none;appearance:none}input[type=date],input[type=text]{background:#fff;padding:.375rem .75rem}input[type=date]:focus,input[type=text]:focus,select:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .1rem rgba(128,189,255,.1)}.btn:focus{outline:0;box-shadow:none}input[type=date]:focus::-ms-value,input[type=text]:focus::-ms-value,select:focus::-ms-value{color:#495057;background-color:#fff}.native-toast{position:fixed;background-color:rgba(50,50,50,.8);border-radius:33px;color:#fff;left:50%;text-align:center;padding:6px 12px;opacity:0;z-index:99999;transition:transform .25s,opacity .25s,top .25s;box-sizing:border-box}.native-toast-bottom{bottom:50px;-ms-transform:translateX(-50%) translateY(50px);transform:translateX(-50%) translateY(50px)}.native-toast-bottom.native-toast-shown{opacity:1;-ms-transform:translateX(-50%) translateY(0);transform:translateX(-50%) translateY(0)}.native-toast-bottom.native-toast-edge{bottom:0}.native-toast-top{top:50px;-ms-transform:translateX(-50%) translateY(-50px);transform:translateX(-50%) translateY(-50px)}.native-toast-top.native-toast-shown{opacity:1;-ms-transform:translateX(-50%) translateY(0);transform:translateX(-50%) translateY(0)}.native-toast-top.native-toast-edge{top:0}.native-toast-center{top:0;-ms-transform:translateX(-50%) translateY(-50px);transform:translateX(-50%) translateY(-50px)}.native-toast-center.native-toast-shown{opacity:1;top:50%;-ms-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%)}.native-toast-edge{border-radius:0;width:100%;text-align:left}@media screen and (min-width:40rem){.native-toast:not(.native-toast-edge){max-width:18rem}}.native-toast-error{background-color:#d92727;color:#fff}.native-toast-success{background-color:#62a465;color:#fff}.native-toast-warning{background-color:#fdaf17;color:#fff}.native-toast-info{background-color:#5060ba;color:#fff}[class^=native-toast-icon-]{vertical-align:middle;margin-right:8px}[class^=native-toast-icon-] svg{width:16px;height:16px}</style><style>#container,body,html{height:100%;width:100%}.btn-box{position:absolute;right:5rem;top:5rem}.btn{background:#0277bd;width:14em;margin-left:3.2rem;margin-top:.8rem}.input-item-append{margin-left:-1px}.input-card{width:auto;bottom:auto;right:auto}.input-item-text{width:auto}.input-item-btn{color:#c0e7ff;background-color:#0477bd}.input-item-btn:hover{color:#fff;background-color:#25a5f7;border-color:#25a5f7}.top_left{top:1rem;left:1rem}.top_right{top:1rem;right:1rem}.bottom_left{left:1rem;bottom:1rem}.bottom_right{right:1rem;bottom:1rem}#divCoordinate{position:absolute;height:26px;line-height:26px;padding:0 10px;border:1px solid #999;background:#fff;z-index:99}hide{display:none}.radio{cursor:pointer;display:inline-block;line-height:1.25;position:relative}input[type=radio]{vertical-align:baseline}.radio+.radio{margin-left:.5em}.input-search{top:1rem;left:30rem}</style></head><body><div id="divCoordinate" class="hide"></div><div id="container"></div><div class="input-card top_left"> <label style="color:grey">请输入或点击地图获取经纬度：(经度,纬度)</label><div class="input-item"><div class="input-item-prepend"> <span class="input-item-text">经纬度</span></div> <input id="lnglat" type="text" value=""><div class="input-item-append"> <input class="input-item-text input-item-btn btn-copy" type="button" copy-for="lnglat" value="复制"></div></div> <label style="color:grey">如果是gps坐标,转换成高德地图坐标</label><div class="input-item"><div class="input-item-prepend"> <span class="input-item-text">gps->高德</span></div> <input id="gps2gaode" type="text"><div class="input-item-append"> <input class="input-item-text input-item-btn btn-copy" type="button" copy-for="gps2gaode" value="复制"></div></div> <label style="color:grey">如果是baidu坐标,转换成高德地图坐标</label><div class="input-item"><div class="input-item-prepend"> <span class="input-item-text">baidu->高德</span></div> <input id="baidu2gaode" type="text"><div class="input-item-append"> <input class="input-item-text input-item-btn btn-copy" type="button" copy-for="baidu2gaode" value="复制"></div></div> <label style="color:grey">如果是图吧坐标,转换成高德地图坐标</label><div class="input-item"><div class="input-item-prepend"> <span class="input-item-text">mapbar->高德</span></div> <input id="mapbar2gaode" type="text"><div class="input-item-append"> <input class="input-item-text input-item-btn btn-copy" type="button" copy-for="mapbar2gaode" value="复制"></div></div> <label style="color:grey">如果是高德坐标,转换成gps坐标</label><div class="input-item"><div class="input-item-prepend"> <span class="input-item-text">高德->gps</span></div> <input id="gaode2gps" type="text"><div class="input-item-append"> <input class="input-item-text input-item-btn btn-copy" type="button" copy-for="gaode2gps" value="复制"></div></div><div><input id="toLocate" type="button" class="btn" value="转换"></div></div><div class="input-card top_right"> <label style="color:grey">请输入查询IP：<span id="nowIp"></span></label><div class="input-item"><div class="input-item-prepend"> <span class="input-item-text">IP</span></div> <input id="ip" type="text" value=""><div class="input-item-append"> <input class="input-item-text input-item-btn" id="ip-btn" type="button" value="查询"></div></div></div><div class="input-card bottom_right"><div class="input-item"> <label class="radio" for="pm"><input type="radio" name="pixel" id="planeOption" value="planeOption" checked="checked">平面坐标</label> <label class="radio" for="rq"><input type="radio" name="pixel" id="containerOption" value="containerOption">容器坐标</label> <label class="radio" for="sw"><input type="radio" name="pixel" id="threeDimOption" value="threeDimOption">三维坐标</label> <label class="radio" for="pgs"><input type="radio" name="pixel" id="pgsOption" value="gpsOption">gps度分秒坐标</label></div> <label style="color:grey" id="pleaseLabel">请输入平面地图像素坐标：(x,y)</label><div class="input-item"><div class="input-item-prepend"> <span class="input-item-text" id="targetLabel">平面像素坐标</span></div> <input id="pixel" type="text"><div class="input-item-append"> <input class="input-item-text input-item-btn btn-copy" type="button" copy-for="pixel" value="复制"></div></div><div> <input id="lnglat2pixel" type="button" class="btn" value="经纬度 -> 平面像素坐标"> <input id="pixel2lnglat" type="button" class="btn" value="平面像素坐标 -> 经纬度"></div></div><div class="input-card input-search"><div class="input-item"><div class="input-item-prepend"> <span class="input-item-text" style="width:8rem">请输入关键字</span></div> <input id="tipinput" type="text"><div class="input-item-append"> <input class="input-item-text input-item-btn" id="tipinput-btn" type="button" value="查询"></div></div></div><div id="copySuccessMessage">复制成功</div><script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.15&key=f6ee7f2a60774cdb679f5ecd16dca79d&plugin=AMap.Geocoder&plugin=AMap.Autocomplete&plugin=AMap.PlaceSearch"></script><script>var GPS={PI:3.141592653589793,x_pi:52.35987755982988,delta:function(t,a){var n=6378245,h=.006693421622965943,i=this.transformLat(a-105,t-35),s=this.transformLon(a-105,t-35),r=t/180*this.PI,o=Math.sin(r);o=1-h*o*o;var M=Math.sqrt(o);return{lat:i=180*i/(n*(1-h)/(o*M)*this.PI),lon:s=180*s/(n/M*Math.cos(r)*this.PI)}},gcj_encrypt:function(t,a){if(this.outOfChina(t,a))return{lat:t,lon:a};var n=this.delta(t,a);return{lat:t+n.lat,lon:a+n.lon}},gcj_decrypt:function(t,a){if(this.outOfChina(t,a))return{lat:t,lon:a};var n=this.delta(t,a);return{lat:t-n.lat,lon:a-n.lon}},gcj_decrypt_exact:function(t,a){for(var n,h,i=.01,s=.01,r=t-i,o=a-s,M=t+i,e=a+s,c=0;;){n=(r+M)/2,h=(o+e)/2;var l=this.gcj_encrypt(n,h);if(i=l.lat-t,s=l.lon-a,Math.abs(i)<1e-9&&Math.abs(s)<1e-9)break;if(0<i?M=n:r=n,0<s?e=h:o=h,1e4<++c)break}return{lat:n,lon:h}},bd_encrypt:function(t,a){var n=a,h=t,i=Math.sqrt(n*n+h*h)+2e-5*Math.sin(h*this.x_pi),s=Math.atan2(h,n)+3e-6*Math.cos(n*this.x_pi);return bdLon=i*Math.cos(s)+.0065,bdLat=i*Math.sin(s)+.006,{lat:bdLat,lon:bdLon}},bd_decrypt:function(t,a){var n=a-.0065,h=t-.006,i=Math.sqrt(n*n+h*h)-2e-5*Math.sin(h*this.x_pi),s=Math.atan2(h,n)-3e-6*Math.cos(n*this.x_pi),r=i*Math.cos(s);return{lat:i*Math.sin(s),lon:r}},mercator_encrypt:function(t,a){var n=20037508.34*a/180,h=Math.log(Math.tan((90+t)*this.PI/360))/(this.PI/180);return{lat:h=20037508.34*h/180,lon:n}},mercator_decrypt:function(t,a){var n=a/20037508.34*180,h=t/20037508.34*180;return{lat:h=180/this.PI*(2*Math.atan(Math.exp(h*this.PI/180))-this.PI/2),lon:n}},distance:function(t,a,n,h){var i=Math.cos(t*this.PI/180)*Math.cos(n*this.PI/180)*Math.cos((a-h)*this.PI/180)+Math.sin(t*this.PI/180)*Math.sin(n*this.PI/180);return 1<i&&(i=1),i<-1&&(i=-1),6371e3*Math.acos(i)},outOfChina:function(t,a){return a<72.004||137.8347<a||t<.8293||55.8271<t},transformLat:function(t,a){var n=2*t-100+3*a+.2*a*a+.1*t*a+.2*Math.sqrt(Math.abs(t));return n+=2*(20*Math.sin(6*t*this.PI)+20*Math.sin(2*t*this.PI))/3,(n+=2*(20*Math.sin(a*this.PI)+40*Math.sin(a/3*this.PI))/3)+2*(160*Math.sin(a/12*this.PI)+320*Math.sin(a*this.PI/30))/3},transformLon:function(t,a){var n=300+t+2*a+.1*t*t+.1*t*a+.1*Math.sqrt(Math.abs(t));return n+=2*(20*Math.sin(6*t*this.PI)+20*Math.sin(2*t*this.PI))/3,(n+=2*(20*Math.sin(t*this.PI)+40*Math.sin(t/3*this.PI))/3)+2*(150*Math.sin(t/12*this.PI)+300*Math.sin(t/30*this.PI))/3}}</script><script type="text/javascript">
        var getIpURL = 'https://restapi.amap.com/v3/ip?key=57e109003c566da9be39d62ba3e2a5c2&ip='
        // var lnglat = [110.262222, 30.045833];
        var map = new AMap.Map("container", {
            resizeEnable: true,
            // center: lnglat,
            zoom: 15
        });
        // 添加鼠标移动获取位置事件
        AMap.event.addListener(map, "mouseover", function (e) {
            divCoordinate.className = "";
            // bodyWidth = $body.width();
            /* //1.2
            if(!("pageX" in e.originalEvent)){
                bodyScrollLeft = $body.scrollLeft();
                bodyScrollTop = $body.scrollTop();
            }
            */
        });

        AMap.event.addListener(map, "mouseout", function (e) {
            divCoordinate.className = "hide";
        });

        AMap.event.addListener(map, "mousemove", function (e) {
            divCoordinate.innerHTML = e.lnglat.toString();
            var style = divCoordinate.style, event = e.originalEvent, left, width = divCoordinate.offsetWidth;

            //1.3
            style.top = (e.pixel.y + 105) + "px";
            style.left = (e.pixel.x + 6) + "px";

            //1.2
            // if ("pageX" in event) {
            //     left = event.pageX;
            //     //style.left = (event.pageX + 6) + "px";
            //     style.top = (event.pageY - 70) + "px";
            // } else {
            //     left = bodyScrollLeft + event.clientX;
            //     //style.left = (bodyScrollLeft + event.clientX + 6) + "px";
            //     style.top = (bodyScrollTop + event.clientY - 70) + "px";
            // }

            // if (left > bodyWidth - width - 6) {
            //     style.left = (left - divCoordinate.offsetWidth) + "px";
            // }
            // else {
            //     style.left = (left + 6) + "px";
            // }

        });
        // 地球坐标系——WGS84：常见于 GPS 设备，Google 地图等国际标准的坐标体系。
        // 火星坐标系——GCJ-02：中国国内使用的被强制加密后的坐标体系，高德坐标就属于该种坐标体系。
        // 百度坐标系——BD-09：百度地图所使用的坐标体系，是在火星坐标系的基础上又进行了一次加密处理。
        var $ = function (elementId) {
            return document.getElementById(elementId);
        };

        var lnglatInput = $('lnglat');
        map.on('click', function (e) {
            lnglatInput.value = e.lnglat.toString();
        });

        // 坐标转换
        function convertFrom(lnglat, type) {
            AMap.convertFrom(lnglat, type, function (status, result) {
                console.log(status, result)
                if (result.info === 'ok') {
                    var resLnglat = result.locations[0];
                    setLabel(resLnglat, type)
                }
            });

        }
        var marks = []
        function setLabel(resLnglat, type) {
            var m2 = new AMap.Marker({
                position: resLnglat,
                icon: "https://webapi.amap.com/theme/v1.3/markers/n/mark_r.png"
            });
            map.add(m2);
            // 设置标签
            m2.setLabel({
                offset: new AMap.Pixel(20, 20),
                content: typeContents[type].content
            });
            marks = marks.concat(m2)
            // console.log(resLnglat)
            // console.log(typeContents[type].content, resLnglat)
            if (typeContents[type].dom) {
                typeContents[type].dom.value = resLnglat
            }
        }


        var types = ['gps', 'mapbar', 'baidu'];
        var typeContents = {
            'gps': {
                content: 'GPS 坐标转为高德坐标',
                dom: $('gps2gaode')
            },
            'mapbar': {
                content: '图吧坐标转为高德坐标',
                dom: $('mapbar2gaode')
            },
            'baidu': {
                content: '百度坐标转为高德坐标',
                dom: $('baidu2gaode')
            },
            'gaode': {
                content: '原始高德坐标',
                dom: $('lnglat')
            },
        };

        $('toLocate').addEventListener('click', function (e) {
            e.preventDefault()
            if (marks) {
                map.remove(marks)
                marks = []
            }
            lnglat = $('lnglat').value.trim().split(',')
            lnglat[0] = lnglat[0].trim()
            lnglat[1] = lnglat[1].trim()
            console.log(lnglat)
            setLabel(lnglat, 'gaode')
            for (let i = 0; i < types.length; i++) {
                const type = types[i];
                convertFrom(lnglat, type);
            }
            map.setCenter(new AMap.LngLat(lnglat[0], lnglat[1]));
            // 高德转gps坐标
            var gpsVal = GPS.gcj_decrypt(lnglat[1], lnglat[0])
            $('gaode2gps').value = gpsVal.lon + ',' + gpsVal.lat;
        })
        //=====================复制功能======================
        function Copy(el) {
            $(el).select(); // 选择对象
            document.execCommand("Copy");
        }
        var btnCopy = document.getElementsByClassName('btn-copy')
        var $message = $('copySuccessMessage');
        for (let i = 0; i < btnCopy.length; i++) {
            const btn = btnCopy[i];
            btn.addEventListener('click', function (e) {
                console.log(e.target.getAttribute('copy-for'))
                var el = e.target.getAttribute('copy-for')
                if (el) {
                    Copy(el);
                    console.log(复制成功)
                }
            })
        }

    </script><script>var pixelInput=$("pixel"),$lnglat2pixel=$("lnglat2pixel"),$pixel2lnglat=$("pixel2lnglat"),$targetLabel=$("targetLabel"),$pleaseLabel=$("pleaseLabel"),options={planeOption:{dom:$("planeOption"),content:"平面像素坐标",pleaseText:"请输入平面地图像素坐标：(x,y)"},threeDimOption:{dom:$("threeDimOption"),content:"三维坐标",pleaseText:"请输入三维坐标：(x,y) (注：z = 0)"},containerOption:{dom:$("containerOption"),content:"地图容器像素坐标",pleaseText:"请输入容器像素坐标：(x,y)"},gpsOption:{dom:$("gpsOption"),content:"gps度分秒坐标",pleaseText:"请输入gps度分秒坐标：(x° y' z\",x° y' z\") 或者用逗号分割(x,y,z)"}},radioValue="planeOption",radios=document.querySelectorAll('input[type="radio"][name="pixel"]');function lnglat2pixel(){if(lnglatInput.value){var e=map.getZoom(),a=lnglatInput.value.split(","),t=new AMap.LngLat(a[0],a[1]);if(console.log(radioValue),"planeOption"==radioValue&&((l=map.lnglatToPixel(t,e)).x=parseInt(l.x),l.y=parseInt(l.y),pixelInput.value=l),"containerOption"==radioValue){var l=map.lngLatToContainer(t);pixelInput.value=l.round()}if("threeDimOption"==radioValue&&((l=map.lngLatToGeodeticCoord(t)).x=parseInt(l.x),l.y=parseInt(l.y),pixelInput.value=l),"gpsOption"==radioValue){var n=Math.abs(Math.round(1e6*a[0])),o=Math.abs(Math.round(1e6*a[1])),i=1*Math.floor(n/1e6)+"° "+Math.floor(60*(n/1e6-Math.floor(n/1e6)))+"' "+60*Math.floor(1e5*(60*(n/1e6-Math.floor(n/1e6))-Math.floor(60*(n/1e6-Math.floor(n/1e6)))))/1e5+'"',p=1*Math.floor(o/1e6)+"° "+Math.floor(60*(o/1e6-Math.floor(o/1e6)))+"' "+60*Math.floor(1e5*(60*(o/1e6-Math.floor(o/1e6))-Math.floor(60*(o/1e6-Math.floor(o/1e6)))))/1e5+'"';pixelInput.value=i+","+p}}}function pixel2lnglat(){if(pixelInput.value){var e=map.getZoom(),a=pixelInput.value.trim().split(",");if(console.log(radioValue),"planeOption"==radioValue){var t=new AMap.Pixel(a[0],a[1]),l=map.pixelToLngLat(t,e);lnglatInput.value=l}if("containerOption"==radioValue&&(t=new AMap.Pixel(a[0],a[1]),l=map.containerToLngLat(t),lnglatInput.value=l),"threeDimOption"==radioValue&&(t=new AMap.Pixel(a[0],a[1]),l=map.geodeticCoordToLngLat(t),lnglatInput.value=l),"gpsOption"==radioValue){var n,o,i=(n=a[0].split("°"))[0].trim(),p=(n=n[1].split("'"))[0].trim(),r=(n=n[1].split('"'))[0].trim(),u=(o=a[1].split("°"))[0].trim(),h=(o=o[1].split("'"))[0].trim(),s=(o=o[1].split('"'))[0].trim(),x=Math.abs(Math.round(1e6*i)),M=Math.abs(Math.round(1e6*Math.abs(Math.round(1e6*p)/1e6))),d=Math.abs(Math.round(1e6*Math.abs(Math.round(1e6*r)/1e6))),g=Math.abs(Math.round(1e6*u)),c=Math.abs(Math.round(1e6*Math.abs(Math.round(1e6*h)/1e6))),m=Math.abs(Math.round(1e6*Math.abs(Math.round(1e6*s)/1e6))),v=1*Math.round(x+M/60+d/3600)/1e6,f=1*Math.round(g+c/60+m/3600)/1e6;lnglatInput.value=v+","+f}}}radios.forEach(function(e){e.checked&&(radioValue=e.value),e.addEventListener("click",function(e){radioValue=e.target.value;var a=options[e.target.value];$lnglat2pixel.value="经纬度 -> "+a.content,$pixel2lnglat.value=a.content+" -> 经纬度",$targetLabel.textContent=a.content,$pleaseLabel.textContent=a.pleaseText})}),lnglat2pixel(),$lnglat2pixel.onclick=lnglat2pixel,$pixel2lnglat.onclick=pixel2lnglat</script><script type="text/javascript">var xmlhttp;function $GetJson(t,e){xmlhttp=null,window.XMLHttpRequest?xmlhttp=new XMLHttpRequest:window.ActiveXObject&&(xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")),null!=xmlhttp?(xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&(200==xmlhttp.status?e(JSON.parse(xmlhttp.response)):console.error("Problem retrieving XML data"))},xmlhttp.open("GET",t,!0),xmlhttp.send(null)):console.error("Your browser does not support XMLHTTP.")}</script><script>function onComplete(o){$("lnglat").value=o.position}function onError(o){$("result").innerHTML="(失败原因排查信息:"+o.message+")"}map.plugin("AMap.Geolocation",function(){geolocation=new AMap.Geolocation({showButton:!0,buttonPosition:"LB",buttonOffset:new AMap.Pixel(10,20),showMarker:!0,markerOptions:{offset:new AMap.Pixel(-18,-36),content:'<img src="https://a.amap.com/jsapi_demos/static/resource/img/user.png" style="width:36px;height:36px"/>'},showCircle:!0,circleOptions:{strokeColor:"#0093FF",noSelect:!0,strokeOpacity:.5,strokeWeight:1,fillColor:"#02B0FF",fillOpacity:.25}}),map.addControl(geolocation),geolocation.getCurrentPosition(function(o,t){"complete"==o?onComplete(t):onError(t)})}),$("ip-btn").addEventListener("click",function(o){$("ip").value&&$GetJson(getIpURL+$("ip").value,function(o){if(console.log(o),o.rectangle){$("lnglat").value=o.rectangle.split(";")[0];var t=$("lnglat").value.trim().split(",");t[0]=t[0].trim(),t[1]=t[1].trim(),map.setCenter(new AMap.LngLat(t[0],t[1]))}})}),$GetJson("https://httpbin.org/ip",function(o){console.log(o),o&&o.origin&&($("ip").value=o.origin,$("nowIp").innerText="当前ip("+o.origin+")")})</script><script>var autocomplete=new AMap.Autocomplete({input:"tipinput"}),placeSearch=new AMap.PlaceSearch({map:map});AMap.event.addListener(autocomplete,"select",function(e){console.log(e),placeSearch.setCity(e.poi.adcode),placeSearch.search(e.poi.name)}),$("tipinput-btn").addEventListener("click",function(e){placeSearch.search($("tipinput").value)})</script></body></html>